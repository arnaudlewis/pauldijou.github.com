---
layout: main
---
.posts
  - page.posts.each do |post|
    = partial('post.html.haml', {'parent'=>page, 'post'=>post, 'alone' => false})

  = page.disqus_comments_count

- current_page_number = page.posts.current_page_index + 1
%ul.list-inline.pagination.visible-xs.visible-sm
  - if page.posts.previous_page
    %li.previous
      %a.button{:href => "#{page.posts.previous_page.url}"}
        .fa.fa-angle-left.fa-lg
        Previous
  - if !page.posts.previous_page
    %li.previous.disabled
      %a.button{:href => "#"}
        .fa.fa-angle-left.fa-lg
        Previous
  %li.disabled
    %a.button{:href => "#"} #{current_page_number} of #{page.posts.pages.size}
  - if page.posts.next_page
    %li.next
      %a.button{:href => "#{page.posts.next_page.url}"}
        Next
        .fa.fa-angle-right.fa-lg
  - if !page.posts.next_page
    %li.next.disabled
      %a.button{:href => "#"}
        Next
        .fa.fa-angle-right.fa-lg

%ul.list-inline.pagination.hidden-xs.hidden-sm
  - if page.posts.previous_page
    %li
      %a.button{:href => "#{site.blog_prefix}/"}
        .fa.fa-angle-double-left.fa-lg
        First
    %li
      %a.button{:href => "#{page.posts.previous_page.url}"}
        .fa.fa-angle-left.fa-lg
        Previous
  - if !page.posts.previous_page
    %li.disabled
      %a.button{:href => "#"}
        .fa.fa-angle-double-left.fa-lg
        First
    %li.disabled
      %a.button{:href => "#"}
        .fa.fa-angle-left.fa-lg
        Previous
  - if current_page_number > 3
    %li.disabled
      %a.button{:href => "#"} ...
    %li
      %a.button{:href => "#{site.blog_prefix}/page/#{current_page_number - 2}/"} #{current_page_number - 2}
  - if current_page_number == 3
    %li
      %a.button{:href => "#{site.blog_prefix}/"} #{current_page_number - 2}
  - if current_page_number > 2
    %li
      %a.button{:href => "#{site.blog_prefix}/page/#{current_page_number - 1}/"} #{current_page_number - 1}
  - if current_page_number == 2
    %li
      %a.button{:href => "#{site.blog_prefix}/"}
        = current_page_number - 1
  %li.active
    %a.button{:href => "#"} #{current_page_number} of #{page.posts.pages.size}
  - if (page.posts.pages.size - current_page_number) > 0
    %li
      %a.button{:href => "#{site.blog_prefix}/page/#{current_page_number + 1}/"} #{current_page_number + 1}
  - if (page.posts.pages.size - current_page_number) > 1
    %li
      %a.button{:href => "#{site.blog_prefix}/page/#{current_page_number + 2}/"} #{current_page_number + 2}
  - if (page.posts.pages.size - current_page_number) > 2
    %li.disabled
      %a.button{:href => "#"} ...
  - if page.posts.next_page
    %li
      %a.button{:href => "#{page.posts.next_page.url}"}
        Next
        .fa.fa-angle-right.fa-lg
    %li
      %a.button{:href => "#{site.blog_prefix}/page/#{page.posts.pages.size}/"}
        Last
        .fa.fa-angle-double-right.fa-lg
  - if !page.posts.next_page
    %li.disabled
      %a.button{:href => "#"}
        Next
        .fa.fa-angle-right.fa-lg
    %li.disabled
      %a.button{:href => "#"}
        Last
        .fa.fa-angle-double-right.fa-lg

%div{:style=>"margin-bottom:20px;text-align:center;"}
  = partial( 'subscribe.html.haml' )
  
%ul.nav.nav-list.well{:style=>"clear:both;"}
  %li.nav-header
    Tag Cloud
  %li
    = site.posts_tag_cloud

.visible-sm
  %div{:style=>"margin-bottom:20px;text-align:center;"}
    = partial( 'subscribe.html.haml' )
  
  %ul.nav.nav-list.well{:style=>"clear:both;"}
    %li.nav-header
      Tag Cloud
    %li
      = site.posts_tag_cloud
